#!/bin/bash
#PBS -P e14
#PBS -q normalbw
#PBS -l walltime=5:00:00
#PBS -l mem=6GB
#PBS -l ncpus=1
#PBS -l storage=gdata/e14
#PBS -l wd
#PBS -v var
###############################################################################
# Create OFAM3 climatologies.
# qsub -v var="phy" clim.sh
# qsub -v var="fe" clim.sh
# qsub -v var="det" clim.sh
# qsub -v var="zoo" clim.sh
# qsub -v var="temp" clim.sh
# qsub -v var="no3" clim.sh
# Note that historical det and zoo have some missing file replacements (_sub.nc)
###############################################################################
module load cdo

cd /g/data/e14/as3189/OFAM/trop_pac/
# Historical
#cdo mergetime ocean_"$var"_2000_01.nc ocean_"$var"_2000_02.nc ocean_"$var"_2000_03.nc ocean_"$var"_2000_04.nc ocean_"$var"_2000_05.nc ocean_"$var"_2000_06.nc ocean_"$var"_2000_07.nc ocean_"$var"_2000_08.nc ocean_"$var"_2000_09.nc ocean_"$var"_2000_10.nc ocean_"$var"_2000_11.nc ocean_"$var"_2000_12.nc ocean_"$var"_2001_01.nc ocean_"$var"_2001_02.nc ocean_"$var"_2001_03.nc ocean_"$var"_2001_04.nc ocean_"$var"_2001_05.nc ocean_"$var"_2001_06.nc ocean_"$var"_2001_07.nc ocean_"$var"_2001_08.nc ocean_"$var"_2001_09.nc ocean_"$var"_2001_10.nc ocean_"$var"_2001_11.nc ocean_"$var"_2001_12.nc ocean_"$var"_2002_01.nc ocean_"$var"_2002_02.nc ocean_"$var"_2002_03.nc ocean_"$var"_2002_04.nc ocean_"$var"_2002_05.nc ocean_"$var"_2002_06.nc ocean_"$var"_2002_07.nc ocean_"$var"_2002_08.nc ocean_"$var"_2002_09.nc ocean_"$var"_2002_10.nc ocean_"$var"_2002_11.nc ocean_"$var"_2002_12.nc ocean_"$var"_2003_01.nc ocean_"$var"_2003_02.nc ocean_"$var"_2003_03.nc ocean_"$var"_2003_04.nc ocean_"$var"_2003_05.nc ocean_"$var"_2003_06.nc ocean_"$var"_2003_07.nc ocean_"$var"_2003_08.nc ocean_"$var"_2003_09.nc ocean_"$var"_2003_10.nc ocean_"$var"_2003_11.nc ocean_"$var"_2003_12.nc ocean_"$var"_2004_01.nc ocean_"$var"_2004_02.nc ocean_"$var"_2004_03.nc ocean_"$var"_2004_04.nc ocean_"$var"_2004_05.nc ocean_"$var"_2004_06.nc ocean_"$var"_2004_07.nc ocean_"$var"_2004_08.nc ocean_"$var"_2004_09.nc ocean_"$var"_2004_10.nc ocean_"$var"_2004_11.nc ocean_"$var"_2004_12.nc ocean_"$var"_2005_01.nc ocean_"$var"_2005_02.nc ocean_"$var"_2005_03.nc ocean_"$var"_2005_04.nc ocean_"$var"_2005_05.nc ocean_"$var"_2005_06.nc ocean_"$var"_2005_07.nc ocean_"$var"_2005_08.nc ocean_"$var"_2005_09.nc ocean_"$var"_2005_10.nc ocean_"$var"_2005_11.nc ocean_"$var"_2005_12.nc ocean_"$var"_2006_01.nc ocean_"$var"_2006_02.nc ocean_"$var"_2006_03.nc ocean_"$var"_2006_04.nc ocean_"$var"_2006_05.nc ocean_"$var"_2006_06.nc ocean_"$var"_2006_07.nc ocean_"$var"_2006_08.nc ocean_"$var"_2006_09.nc ocean_"$var"_2006_10.nc ocean_"$var"_2006_11.nc ocean_"$var"_2006_12.nc ocean_"$var"_2007_01.nc ocean_"$var"_2007_02.nc ocean_"$var"_2007_03.nc ocean_"$var"_2007_04.nc ocean_"$var"_2007_05.nc ocean_"$var"_2007_06.nc ocean_"$var"_2007_07.nc ocean_"$var"_2007_08.nc ocean_"$var"_2007_09.nc ocean_"$var"_2007_10.nc ocean_"$var"_2007_11.nc ocean_"$var"_2007_12.nc ocean_"$var"_2008_01.nc ocean_"$var"_2008_02.nc ocean_"$var"_2008_03.nc ocean_"$var"_2008_04.nc ocean_"$var"_2008_05.nc ocean_"$var"_2008_06.nc ocean_"$var"_2008_07.nc ocean_"$var"_2008_08.nc ocean_"$var"_2008_09.nc ocean_"$var"_2008_10.nc ocean_"$var"_2008_11.nc ocean_"$var"_2008_12.nc ocean_"$var"_2009_01.nc ocean_"$var"_2009_02.nc ocean_"$var"_2009_03.nc ocean_"$var"_2009_04.nc ocean_"$var"_2009_05.nc ocean_"$var"_2009_06.nc ocean_"$var"_2009_07.nc ocean_"$var"_2009_08.nc ocean_"$var"_2009_09.nc ocean_"$var"_2009_10.nc ocean_"$var"_2009_11.nc ocean_"$var"_2009_12.nc ocean_"$var"_2010_01.nc ocean_"$var"_2010_02.nc ocean_"$var"_2010_03.nc ocean_"$var"_2010_04.nc ocean_"$var"_2010_05.nc ocean_"$var"_2010_06.nc ocean_"$var"_2010_07.nc ocean_"$var"_2010_08.nc ocean_"$var"_2010_09.nc ocean_"$var"_2010_10.nc ocean_"$var"_2010_11.nc ocean_"$var"_2010_12.nc ocean_"$var"_2011_01.nc ocean_"$var"_2011_02.nc ocean_"$var"_2011_03.nc ocean_"$var"_2011_04.nc ocean_"$var"_2011_05.nc ocean_"$var"_2011_06.nc ocean_"$var"_2011_07.nc ocean_"$var"_2011_08.nc ocean_"$var"_2011_09.nc ocean_"$var"_2011_10.nc ocean_"$var"_2011_11.nc ocean_"$var"_2011_12.nc ocean_"$var"_2012_01.nc ocean_"$var"_2012_02.nc ocean_"$var"_2012_03.nc ocean_"$var"_2012_04.nc ocean_"$var"_2012_05.nc ocean_"$var"_2012_06.nc ocean_"$var"_2012_07.nc ocean_"$var"_2012_08.nc ocean_"$var"_2012_09.nc ocean_"$var"_2012_10.nc ocean_"$var"_2012_11.nc ocean_"$var"_2012_12.nc  clim/ocean_"$var"_2000-2012_merged.nc
#cdo mergetime ocean_zoo_2000_01.nc ocean_zoo_2000_02.nc ocean_zoo_2000_03.nc ocean_zoo_2000_04.nc ocean_zoo_2000_05.nc ocean_zoo_2000_06.nc ocean_zoo_2000_07.nc ocean_zoo_2000_08.nc ocean_zoo_2000_09.nc ocean_zoo_2000_10.nc ocean_zoo_2000_11.nc ocean_zoo_2000_12.nc ocean_zoo_2001_01.nc ocean_zoo_2001_02.nc ocean_zoo_2001_03.nc ocean_zoo_2001_04.nc ocean_zoo_2001_05.nc ocean_zoo_2001_06.nc ocean_zoo_2001_07.nc ocean_zoo_2001_08.nc ocean_zoo_2001_09.nc ocean_zoo_2001_10.nc ocean_zoo_2001_11.nc ocean_zoo_2001_12.nc ocean_zoo_2002_01.nc ocean_zoo_2002_02.nc ocean_zoo_2002_03.nc ocean_zoo_2002_04.nc ocean_zoo_2002_05.nc ocean_zoo_2002_06.nc ocean_zoo_2002_07.nc ocean_zoo_2002_08.nc ocean_zoo_2002_09.nc ocean_zoo_2002_10.nc ocean_zoo_2002_11.nc ocean_zoo_2002_12.nc ocean_zoo_2003_01.nc ocean_zoo_2003_02.nc ocean_zoo_2003_03.nc ocean_zoo_2003_04.nc ocean_zoo_2003_05.nc ocean_zoo_2003_06.nc ocean_zoo_2003_07.nc ocean_zoo_2003_08.nc ocean_zoo_2003_09.nc ocean_zoo_2003_10.nc ocean_zoo_2003_11.nc ocean_zoo_2003_12.nc ocean_zoo_2004_01.nc ocean_zoo_2004_02.nc ocean_zoo_2004_03.nc ocean_zoo_2004_04.nc ocean_zoo_2004_05.nc ocean_zoo_2004_06.nc ocean_zoo_2004_07.nc ocean_zoo_2004_08.nc ocean_zoo_2004_09.nc ocean_zoo_2004_10.nc ocean_zoo_2004_11.nc ocean_zoo_2004_12.nc ocean_zoo_2005_01.nc ocean_zoo_2005_02.nc ocean_zoo_2005_03.nc ocean_zoo_2005_04.nc ocean_zoo_2005_05.nc ocean_zoo_2005_06.nc ocean_zoo_2005_07.nc ocean_zoo_2005_08.nc ocean_zoo_2005_09.nc ocean_zoo_2005_10.nc ocean_zoo_2005_11.nc ocean_zoo_2005_12.nc ocean_zoo_2006_01.nc ocean_zoo_2006_02.nc ocean_zoo_2006_03.nc ocean_zoo_2006_04.nc ocean_zoo_2006_05.nc ocean_zoo_2006_06.nc ocean_zoo_2006_07.nc ocean_zoo_2006_08.nc ocean_zoo_2006_09.nc ocean_zoo_2006_10.nc ocean_zoo_2006_11.nc ocean_zoo_2006_12.nc ocean_zoo_2007_01.nc ocean_zoo_2007_02.nc ocean_zoo_2007_03.nc ocean_zoo_2007_04.nc ocean_zoo_2007_05.nc ocean_zoo_2007_06.nc ocean_zoo_2007_07.nc ocean_zoo_2007_08.nc ocean_zoo_2007_09.nc ocean_zoo_2007_10.nc ocean_zoo_2007_11.nc ocean_zoo_2007_12.nc ocean_zoo_2008_01.nc ocean_zoo_2008_02.nc ocean_zoo_2008_03_sub.nc ocean_zoo_2008_04.nc ocean_zoo_2008_05.nc ocean_zoo_2008_06.nc ocean_zoo_2008_07.nc ocean_zoo_2008_08.nc ocean_zoo_2008_09.nc ocean_zoo_2008_10.nc ocean_zoo_2008_11.nc ocean_zoo_2008_12.nc ocean_zoo_2009_01.nc ocean_zoo_2009_02.nc ocean_zoo_2009_03.nc ocean_zoo_2009_04.nc ocean_zoo_2009_05.nc ocean_zoo_2009_06.nc ocean_zoo_2009_07.nc ocean_zoo_2009_08.nc ocean_zoo_2009_09.nc ocean_zoo_2009_10.nc ocean_zoo_2009_11.nc ocean_zoo_2009_12.nc ocean_zoo_2010_01.nc ocean_zoo_2010_02.nc ocean_zoo_2010_03.nc ocean_zoo_2010_04.nc ocean_zoo_2010_05.nc ocean_zoo_2010_06.nc ocean_zoo_2010_07.nc ocean_zoo_2010_08.nc ocean_zoo_2010_09.nc ocean_zoo_2010_10.nc ocean_zoo_2010_11.nc ocean_zoo_2010_12.nc ocean_zoo_2011_01.nc ocean_zoo_2011_02.nc ocean_zoo_2011_03.nc ocean_zoo_2011_04.nc ocean_zoo_2011_05.nc ocean_zoo_2011_06.nc ocean_zoo_2011_07.nc ocean_zoo_2011_08.nc ocean_zoo_2011_09.nc ocean_zoo_2011_10.nc ocean_zoo_2011_11.nc ocean_zoo_2011_12.nc ocean_zoo_2012_01.nc ocean_zoo_2012_02.nc ocean_zoo_2012_03.nc ocean_zoo_2012_04.nc ocean_zoo_2012_05.nc ocean_zoo_2012_06.nc ocean_zoo_2012_07.nc ocean_zoo_2012_08.nc ocean_zoo_2012_09.nc ocean_zoo_2012_10.nc ocean_zoo_2012_11.nc ocean_zoo_2012_12.nc clim/ocean_zoo_2000-2012_merged.nc
#cdo mergetime ocean_det_2000_01.nc ocean_det_2000_02.nc ocean_det_2000_03.nc ocean_det_2000_04.nc ocean_det_2000_05.nc ocean_det_2000_06.nc ocean_det_2000_07.nc ocean_det_2000_08.nc ocean_det_2000_09.nc ocean_det_2000_10.nc ocean_det_2000_11.nc ocean_det_2000_12.nc ocean_det_2001_01.nc ocean_det_2001_02.nc ocean_det_2001_03.nc ocean_det_2001_04.nc ocean_det_2001_05.nc ocean_det_2001_06.nc ocean_det_2001_07.nc ocean_det_2001_08.nc ocean_det_2001_09.nc ocean_det_2001_10.nc ocean_det_2001_11.nc ocean_det_2001_12.nc ocean_det_2002_01.nc ocean_det_2002_02.nc ocean_det_2002_03.nc ocean_det_2002_04.nc ocean_det_2002_05.nc ocean_det_2002_06.nc ocean_det_2002_07.nc ocean_det_2002_08.nc ocean_det_2002_09.nc ocean_det_2002_10.nc ocean_det_2002_11.nc ocean_det_2002_12.nc ocean_det_2003_01.nc ocean_det_2003_02.nc ocean_det_2003_03.nc ocean_det_2003_04.nc ocean_det_2003_05.nc ocean_det_2003_06.nc ocean_det_2003_07.nc ocean_det_2003_08.nc ocean_det_2003_09.nc ocean_det_2003_10.nc ocean_det_2003_11.nc ocean_det_2003_12.nc ocean_det_2004_01.nc ocean_det_2004_02.nc ocean_det_2004_03.nc ocean_det_2004_04.nc ocean_det_2004_05.nc ocean_det_2004_06.nc ocean_det_2004_07.nc ocean_det_2004_08.nc ocean_det_2004_09.nc ocean_det_2004_10.nc ocean_det_2004_11.nc ocean_det_2004_12.nc ocean_det_2005_01.nc ocean_det_2005_02.nc ocean_det_2005_03.nc ocean_det_2005_04.nc ocean_det_2005_05.nc ocean_det_2005_06.nc ocean_det_2005_07.nc ocean_det_2005_08.nc ocean_det_2005_09.nc ocean_det_2005_10.nc ocean_det_2005_11.nc ocean_det_2005_12.nc ocean_det_2006_01.nc ocean_det_2006_02.nc ocean_det_2006_03.nc ocean_det_2006_04.nc ocean_det_2006_05.nc ocean_det_2006_06.nc ocean_det_2006_07.nc ocean_det_2006_08.nc ocean_det_2006_09.nc ocean_det_2006_10.nc ocean_det_2006_11.nc ocean_det_2006_12.nc ocean_det_2007_01.nc ocean_det_2007_02.nc ocean_det_2007_03.nc ocean_det_2007_04.nc ocean_det_2007_05.nc ocean_det_2007_06.nc ocean_det_2007_07.nc ocean_det_2007_08.nc ocean_det_2007_09.nc ocean_det_2007_10.nc ocean_det_2007_11.nc ocean_det_2007_12.nc ocean_det_2008_01_sub.nc ocean_det_2008_02.nc ocean_det_2008_03.nc ocean_det_2008_04.nc ocean_det_2008_05.nc ocean_det_2008_06.nc ocean_det_2008_07.nc ocean_det_2008_08.nc ocean_det_2008_09.nc ocean_det_2008_10.nc ocean_det_2008_11.nc ocean_det_2008_12.nc ocean_det_2009_01.nc ocean_det_2009_02.nc ocean_det_2009_03.nc ocean_det_2009_04.nc ocean_det_2009_05.nc ocean_det_2009_06.nc ocean_det_2009_07.nc ocean_det_2009_08.nc ocean_det_2009_09.nc ocean_det_2009_10.nc ocean_det_2009_11.nc ocean_det_2009_12.nc ocean_det_2010_01.nc ocean_det_2010_02.nc ocean_det_2010_03.nc ocean_det_2010_04.nc ocean_det_2010_05.nc ocean_det_2010_06.nc ocean_det_2010_07.nc ocean_det_2010_08.nc ocean_det_2010_09.nc ocean_det_2010_10.nc ocean_det_2010_11.nc ocean_det_2010_12.nc ocean_det_2011_01.nc ocean_det_2011_02.nc ocean_det_2011_03.nc ocean_det_2011_04.nc ocean_det_2011_05.nc ocean_det_2011_06.nc ocean_det_2011_07.nc ocean_det_2011_08.nc ocean_det_2011_09.nc ocean_det_2011_10.nc ocean_det_2011_11.nc ocean_det_2011_12.nc ocean_det_2012_01.nc ocean_det_2012_02.nc ocean_det_2012_03.nc ocean_det_2012_04.nc ocean_det_2012_05.nc ocean_det_2012_06.nc ocean_det_2012_07.nc ocean_det_2012_08.nc ocean_det_2012_09.nc ocean_det_2012_10.nc ocean_det_2012_11.nc ocean_det_2012_12.nc clim/ocean_det_2000-2012_merged.nc
#cdo -ymonmean -selyear,2000/2012 clim/ocean_"$var"_2000-2012_merged.nc clim/ocean_"$var"_2000-2012_climo.nc

# RCP8.5
cdo mergetime ocean_"$var"_2089_01.nc ocean_"$var"_2089_02.nc ocean_"$var"_2089_03.nc ocean_"$var"_2089_04.nc ocean_"$var"_2089_05.nc ocean_"$var"_2089_06.nc ocean_"$var"_2089_07.nc ocean_"$var"_2089_08.nc ocean_"$var"_2089_09.nc ocean_"$var"_2089_10.nc ocean_"$var"_2089_11.nc ocean_"$var"_2089_12.nc ocean_"$var"_2090_01.nc ocean_"$var"_2090_02.nc ocean_"$var"_2090_03.nc ocean_"$var"_2090_04.nc ocean_"$var"_2090_05.nc ocean_"$var"_2090_06.nc ocean_"$var"_2090_07.nc ocean_"$var"_2090_08.nc ocean_"$var"_2090_09.nc ocean_"$var"_2090_10.nc ocean_"$var"_2090_11.nc ocean_"$var"_2090_12.nc ocean_"$var"_2091_01.nc ocean_"$var"_2091_02.nc ocean_"$var"_2091_03.nc ocean_"$var"_2091_04.nc ocean_"$var"_2091_05.nc ocean_"$var"_2091_06.nc ocean_"$var"_2091_07.nc ocean_"$var"_2091_08.nc ocean_"$var"_2091_09.nc ocean_"$var"_2091_10.nc ocean_"$var"_2091_11.nc ocean_"$var"_2091_12.nc ocean_"$var"_2092_01.nc ocean_"$var"_2092_02.nc ocean_"$var"_2092_03.nc ocean_"$var"_2092_04.nc ocean_"$var"_2092_05.nc ocean_"$var"_2092_06.nc ocean_"$var"_2092_07.nc ocean_"$var"_2092_08.nc ocean_"$var"_2092_09.nc ocean_"$var"_2092_10.nc ocean_"$var"_2092_11.nc ocean_"$var"_2092_12.nc ocean_"$var"_2093_01.nc ocean_"$var"_2093_02.nc ocean_"$var"_2093_03.nc ocean_"$var"_2093_04.nc ocean_"$var"_2093_05.nc ocean_"$var"_2093_06.nc ocean_"$var"_2093_07.nc ocean_"$var"_2093_08.nc ocean_"$var"_2093_09.nc ocean_"$var"_2093_10.nc ocean_"$var"_2093_11.nc ocean_"$var"_2093_12.nc ocean_"$var"_2094_01.nc ocean_"$var"_2094_02.nc ocean_"$var"_2094_03.nc ocean_"$var"_2094_04.nc ocean_"$var"_2094_05.nc ocean_"$var"_2094_06.nc ocean_"$var"_2094_07.nc ocean_"$var"_2094_08.nc ocean_"$var"_2094_09.nc ocean_"$var"_2094_10.nc ocean_"$var"_2094_11.nc ocean_"$var"_2094_12.nc ocean_"$var"_2095_01.nc ocean_"$var"_2095_02.nc ocean_"$var"_2095_03.nc ocean_"$var"_2095_04.nc ocean_"$var"_2095_05.nc ocean_"$var"_2095_06.nc ocean_"$var"_2095_07.nc ocean_"$var"_2095_08.nc ocean_"$var"_2095_09.nc ocean_"$var"_2095_10.nc ocean_"$var"_2095_11.nc ocean_"$var"_2095_12.nc ocean_"$var"_2096_01.nc ocean_"$var"_2096_02.nc ocean_"$var"_2096_03.nc ocean_"$var"_2096_04.nc ocean_"$var"_2096_05.nc ocean_"$var"_2096_06.nc ocean_"$var"_2096_07.nc ocean_"$var"_2096_08.nc ocean_"$var"_2096_09.nc ocean_"$var"_2096_10.nc ocean_"$var"_2096_11.nc ocean_"$var"_2096_12.nc ocean_"$var"_2097_01.nc ocean_"$var"_2097_02.nc ocean_"$var"_2097_03.nc ocean_"$var"_2097_04.nc ocean_"$var"_2097_05.nc ocean_"$var"_2097_06.nc ocean_"$var"_2097_07.nc ocean_"$var"_2097_08.nc ocean_"$var"_2097_09.nc ocean_"$var"_2097_10.nc ocean_"$var"_2097_11.nc ocean_"$var"_2097_12.nc ocean_"$var"_2098_01.nc ocean_"$var"_2098_02.nc ocean_"$var"_2098_03.nc ocean_"$var"_2098_04.nc ocean_"$var"_2098_05.nc ocean_"$var"_2098_06.nc ocean_"$var"_2098_07.nc ocean_"$var"_2098_08.nc ocean_"$var"_2098_09.nc ocean_"$var"_2098_10.nc ocean_"$var"_2098_11.nc ocean_"$var"_2098_12.nc ocean_"$var"_2099_01.nc ocean_"$var"_2099_02.nc ocean_"$var"_2099_03.nc ocean_"$var"_2099_04.nc ocean_"$var"_2099_05.nc ocean_"$var"_2099_06.nc ocean_"$var"_2099_07.nc ocean_"$var"_2099_08.nc ocean_"$var"_2099_09.nc ocean_"$var"_2099_10.nc ocean_"$var"_2099_11.nc ocean_"$var"_2099_12.nc ocean_"$var"_2100_01.nc ocean_"$var"_2100_02.nc ocean_"$var"_2100_03.nc ocean_"$var"_2100_04.nc ocean_"$var"_2100_05.nc ocean_"$var"_2100_06.nc ocean_"$var"_2100_07.nc ocean_"$var"_2100_08.nc ocean_"$var"_2100_09.nc ocean_"$var"_2100_10.nc ocean_"$var"_2100_11.nc ocean_"$var"_2100_12.nc ocean_"$var"_2101_01.nc ocean_"$var"_2101_02.nc ocean_"$var"_2101_03.nc ocean_"$var"_2101_04.nc ocean_"$var"_2101_05.nc ocean_"$var"_2101_06.nc ocean_"$var"_2101_07.nc ocean_"$var"_2101_08.nc ocean_"$var"_2101_09.nc ocean_"$var"_2101_10.nc ocean_"$var"_2101_11.nc ocean_"$var"_2101_12.nc clim/ocean_"$var"_2089-2101_merged.nc
cdo -ymonmean -selyear,2089/2101 clim/ocean_"$var"_2089-2101_merged.nc clim/ocean_"$var"_2089-2101_climo.nc

#rm clim/ocean_no3_2000-2012_merged.nc
#scp /g/data/e14/as3189/OFAM/trop_pac/clim/ocean_no3_2000-2012*.nc /g/data/e14/as3189/tmp/
#setfacl -m g:e14:rwx /g/data/e14/as3189/tmp/*
